<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskLoop Extension Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-item {
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid #ddd;
            background: #f9f9f9;
        }
        .test-item.pass {
            border-left-color: #28a745;
            background: #f8fff9;
        }
        .test-item.fail {
            border-left-color: #dc3545;
            background: #fff8f8;
        }
        .test-item.pending {
            border-left-color: #ffc107;
            background: #fffdf8;
        }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #1d4ed8;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        code {
            background: #f1f1f1;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <h1>TaskLoop Extension Testing Guide</h1>
    
    <div class="instructions">
        <h3>Before Testing:</h3>
        <ol>
            <li>Generate icons using <code>create-icons.html</code></li>
            <li>Save the generated icons in the <code>icons/</code> folder</li>
            <li>Open Chrome and go to <code>chrome://extensions/</code></li>
            <li>Enable "Developer mode" (toggle in top right)</li>
            <li>Click "Load unpacked" and select this folder</li>
            <li>Pin the extension to your toolbar for easy access</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>Installation Tests</h2>
        <div class="test-item pending" id="test-load">
            <strong>Extension Loads:</strong> Extension appears in chrome://extensions without errors
        </div>
        <div class="test-item pending" id="test-icon">
            <strong>Icon Displays:</strong> Extension icon appears in toolbar
        </div>
        <div class="test-item pending" id="test-popup">
            <strong>Popup Opens:</strong> Clicking icon opens popup window
        </div>
    </div>

    <div class="test-section">
        <h2>Core Functionality Tests</h2>
        <div class="test-item pending" id="test-add-task">
            <strong>Add Task:</strong> Can create new tasks with name and duration
        </div>
        <div class="test-item pending" id="test-start-task">
            <strong>Start Task:</strong> Can start a task and timer begins
        </div>
        <div class="test-item pending" id="test-badge">
            <strong>Badge Updates:</strong> Badge shows remaining time and task abbreviation
        </div>
        <div class="test-item pending" id="test-pause">
            <strong>Pause/Resume:</strong> Can pause and resume active tasks
        </div>
        <div class="test-item pending" id="test-complete">
            <strong>Complete Task:</strong> Can mark tasks as complete
        </div>
    </div>

    <div class="test-section">
        <h2>Data Persistence Tests</h2>
        <div class="test-item pending" id="test-save">
            <strong>Data Saves:</strong> Tasks persist after closing popup
        </div>
        <div class="test-item pending" id="test-restart">
            <strong>Browser Restart:</strong> Data persists after browser restart
        </div>
        <div class="test-item pending" id="test-history">
            <strong>Task History:</strong> Completed tasks appear in history
        </div>
    </div>

    <div class="test-section">
        <h2>Settings & Features Tests</h2>
        <div class="test-item pending" id="test-settings">
            <strong>Settings Page:</strong> Options page opens and functions
        </div>
        <div class="test-item pending" id="test-calendar">
            <strong>Calendar View:</strong> Calendar displays and navigates correctly
        </div>
        <div class="test-item pending" id="test-export">
            <strong>Export Data:</strong> Can export task data to JSON file
        </div>
        <div class="test-item pending" id="test-import">
            <strong>Import Data:</strong> Can import previously exported data
        </div>
    </div>

    <div class="test-section">
        <h2>Testing Instructions</h2>
        
        <h3>1. Basic Task Flow</h3>
        <ol>
            <li>Click the TaskLoop extension icon</li>
            <li>Add a new task: "Test Task" with 30 minutes duration</li>
            <li>Click "Start" on the task</li>
            <li>Verify the badge shows "30" and turns green</li>
            <li>Wait a minute and verify badge updates to "29"</li>
            <li>Click pause, then resume to test controls</li>
            <li>Click complete to finish the task</li>
        </ol>

        <h3>2. Data Persistence</h3>
        <ol>
            <li>Add several tasks with different durations</li>
            <li>Close the popup and reopen - tasks should still be there</li>
            <li>Restart Chrome completely</li>
            <li>Check that tasks and history are preserved</li>
        </ol>

        <h3>3. Settings & Export</h3>
        <ol>
            <li>Click the settings icon (‚öôÔ∏è) in the popup</li>
            <li>Try changing various settings</li>
            <li>Export your data to a JSON file</li>
            <li>Clear all data, then import the file back</li>
            <li>Verify all data is restored correctly</li>
        </ol>

        <h3>4. Calendar View</h3>
        <ol>
            <li>Complete a few tasks to build history</li>
            <li>Click the calendar icon (üìÖ) in the popup</li>
            <li>Navigate between months</li>
            <li>Verify completed tasks show on correct dates</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>Common Issues & Solutions</h2>
        
        <h3>Extension Won't Load</h3>
        <ul>
            <li>Check that all icon files exist in the icons/ folder</li>
            <li>Verify manifest.json syntax is correct</li>
            <li>Look for errors in chrome://extensions</li>
        </ul>

        <h3>Badge Not Updating</h3>
        <ul>
            <li>Check browser console for JavaScript errors</li>
            <li>Verify background.js is running (check service worker)</li>
            <li>Try reloading the extension</li>
        </ul>

        <h3>Data Not Saving</h3>
        <ul>
            <li>Check Chrome storage permissions in manifest</li>
            <li>Look for storage API errors in console</li>
            <li>Verify popup.js and database.js are loading correctly</li>
        </ul>
    </div>

    <button onclick="window.open('chrome://extensions/', '_blank')">Open Chrome Extensions</button>
    <button onclick="window.open('create-icons.html', '_blank')">Generate Icons</button>

    <script>
        // Simple test result tracking
        function markTest(testId, status) {
            const element = document.getElementById(testId);
            element.className = `test-item ${status}`;
        }

        // You can manually mark tests as you complete them
        // markTest('test-load', 'pass');
        // markTest('test-icon', 'fail');
        // markTest('test-popup', 'pending');
    </script>
</body>
</html>
